# Zenika Papers

.Supprimer le contenu de la base
[source,cypher]
----
MATCH (n)
DETACH DELETE n
----

.Creation de l'entite black et white liste
----
MERGE(whiteList:WhiteList{libelle:'WhiteList'})
MERGE(blackList:BlackList{libelle:'BlackList'})
----

.Creation de l'entite pays
----
MERGE(paysFR:Pays{libelle:'France',code:'FR'})
MERGE(paysUS:Pays{libelle:'Etats-Unies',code:'US'})
MERGE(paysMU:Pays{libelle:'Ile Maurice',code:'MU'})
MERGE(paysGB:Pays{libelle:'Royaume-Uni',code:'GB'})
MERGE(paysTU:Pays{libelle:'Tunisie',code:'TU'})
MERGE(paysCA:Pays{libelle:'Canada',code:'CA'})
----

.Creation de la relation pays et white/blakList
----
MERGE(paysFR)-[:APPARTIENT]->(whiteList)
MERGE(paysUS)-[:APPARTIENT]->(whiteList)
MERGE(paysMU)-[:APPARTIENT]->(blackList)
MERGE(paysGB)-[:APPARTIENT]->(whiteList)
MERGE(paysTU)-[:APPARTIENT]->(blackList)
MERGE(paysCA)-[:APPARTIENT]->(whiteList)
----

.Creation de l'entite banque
----
MERGE (banqueSG:Banque{libelle:'Société Générale'})
MERGE (banqueBNP:Banque{libelle:'BNP Paribas'})
MERGE (banqueUTB:Banque{libelle:'Union Tunisienne de Banque'})
MERGE (banqueCA:Banque{libelle:'Banque du Quebec'})
----

.Creation de la relation
----
MERGE (banqueSG)-[:EST LOCALISE]->(paysFR)
MERGE(banqueBNP)-[:EST LOCALISE]->(paysFR)
MERGE(banqueUTB)-[:EST LOCALISE]->(paysTU)
MERGE(banqueCA)-[:EST LOCALISE]->(paysCA)
MERGE(banqueMU)-[:EST LOCALISE]->(paysMU)
----

.Creation de la typologie de personne
----
MERGE(typePersonneP:TypePersonne{code:'P',libelle:'physique'})
MERGE(typePersonneM:TypePersonne{code:'M',libelle:'morale'})
----

.Creation des personne
----
MERGE(personneVUJ:Personne{nom:'Ujoodha',prenom:'Vickrame',dateNaissance:'1979-06-21',sexe:'M',compteGithub:'vickrame',compteTwitter:'@RuvaChlea',profession:'developpeur'})
MERGE(personneFNE:Personne{nom:'Nègre',prenom:'Florian',sexe:'M',compteGithub:'fnegre',compteTwitter:'@floriannegre',profession:'developpeur'})
MERGE(personneABO:Personne{nom:'Bonneau',prenom:'Antoine',sexe:'M',compteGithub:'',compteTwitter:'@goodWater',profession:'directeur'})
MERGE(personneAOR:Personne{nom:'Orenge',prenom:'Amelin',sexe:'M',compteGithub:'amelin',compteTwitter:'@amelin',profession:'developpeur'})
MERGE(personneACE:Personne{nom:'Celier',prenom:'Antoine',sexe:'M',compteGithub:'antoineCelier',compteTwitter:'@antoineCelier',profession:'developpeur'})
MERGE(personneBPI:Personne{nom:'Boss',prenom:'Pierre',sexe:'M',compteGithub:'',compteTwitter:'',profession:''})
MERGE(personneFisc:Personne{nom:'Ministere de la finance',prenom:'',sexe:'',compteGithub:'',compteTwitter:'',profession:'controlleur fiscal'})
MERGE(personneRestaurateur:Personne{nom:'Restaurant',prenom:'',sexe:'',compteGithub:'',compteTwitter:'',profession:'restaurateur'})
MERGE(personneImprimeur:Personne{nom:'Imprimerie',prenom:'',sexe:'',compteGithub:'',compteTwitter:'',profession:'imprimeur'})
MERGE(personneInconnu:Personne{nom:'Inconnu',prenom:'',sexe:'',compteGithub:'',compteTwitter:'',profession:''})
MERGE(personneAUJ:Personne{nom:'Ujoodha',prenom:'Anne',sexe:'F',compteGithub:'',compteTwitter:'',profession:''})
----

.Creation de la relation Personne et type de personne
----
MERGE (personneVUJ)-[:EST]->(typePersonneP)
MERGE (personneFNE)-[:EST]->(typePersonneP)
MERGE (personneABO)-[:EST]->(typePersonneP)
MERGE (personneAOR)-[:EST]->(typePersonneP)
MERGE (personneRestaurateur)-[:EST]->(typePersonneM)
MERGE (personneImprimeur)-[:EST]->(typePersonneM)
MERGE (personneACE)-[:EST]->(typePersonneP)
MERGE (personneBPI)-[:EST]->(typePersonneM)
MERGE (personneFisc)-[:EST]->(typePersonneM)
MERGE (personneAUJ)-[:EST]->(typePersonneP)
----

.Creation des comptes
----
MERGE(compteAgence:Compte{libelle:'Compte de Zenika Nantes',dateOuverture:'2012-01-01'})
MERGE(compteAgenceParis:Compte{libelle:'Compte de Zenika Paris',dateOuverture:'2002-01-01'})
MERGE(compteFNE:Compte{libelle:'Compte de Florian',dateOuverture:'1998-01-01'})
MERGE(compteVUJ:Compte{libelle:'Compte de Vickrame',dateOuverture:'1996-01-01'})
MERGE(compteABO:Compte{libelle:'Compte Antoine',dateOuverture:'1996-11-01'})
MERGE(compteACE:Compte{libelle:'Compte Antoine Celier',dateOuverture:'1999-11-01'})
MERGE(compteAOR:Compte{libelle:'Compte d'Amelin',dateOuverture:'2003-05-"1'})
----

.Creation de la relation Personne/Compte
----
MERGE (personneVUJ)-[:DISPOSE]->(compteVUJ)
MERGE (personneAUJ)-[:DISPOSE]->(compteVUJ)
MERGE (personneFNE)-[:DISPOSE]->(compteFNE)
MERGE (personneABO)-[:DISPOSE]->(compteABO)
MERGE (personneAOR)-[:DISPOSE]->(compteAOR)
MERGE (personneACE)-[:DISPOSE]->(compteACE)
MERGE (personneRestaurateur)-[:DISPOSE]->(compteRestaurateur)
MERGE (personneImprimeur)-[:DISPOSE]->(compteImprimeur)
----

.Creation des agences
----
MERGE(agenceNantes:Agence{libelle:'Zenika Nantes'})
MERGE(agenceParis:Agence{libelle:'Zenika Paris'})
----

.Creation relation *Compte/All*
----
MERGE (agenceNantes)-[:DISPOSE]->(compteAgence)
MERGE (personneFisc)-[:CONSULTE]->(compteAgence)
----


.Creation de l entite *consultant*
----
MERGE(consultantVUJ:Consultant{email:'vickrame.ujoodha@zenika.com',tel:'06-18-06-21-55'})
MERGE(consultantFNE:Consultant{email:'florian.negre@zenika.com',tel:''})
MERGE(consultantAOR:Consultant{email:'amelin.orange@zenika.com',tel:''})
MERGE(consultantACE:Consultant{email:'antoine.celier@zenika.com',tel:''})
----

.Creation de la relation *Consultant/Personne*
----
MERGE (consultantVUJ)-[:EST]->(personneVUJ)
MERGE (consultantFNE)-[:EST]->(personneFNE)
MERGE (consultantAOR)-[:EST]->(personneAOR)
MERGE (consultantACE)-[:EST]->(personneACE)
----

.Creation des evenments
----
MERGE(evtDevoxMaroc:Evt{libelle:'DEVOXX MAROC', pays:'Maroc', dateDebut:'2018-09-01', dateFin:'2018-09-04',raison:'organiser'})
MERGE(evtVoxxDays:Evt{libelle:'VoxxDays', pays:'Singapore', dateDebut:'2018-10-01', dateFin:'2018-10-04',raison:'participer'})
MERGE(evtGoogleIO:Evt{libelle:'GoogleIO', pays:'Etat-Unis', dateDebut:'2018-05-01', dateFin:'2018-05-04',raison:'assister'})
MERGE(evtDevFest:Evt{libelle:'DevFest', pays:'France', dateDebut:'2017-11-01', dateFin:'2017-1104',raison:'assister'})
----

.Creation de la relation *event/consultant*
----
MERGE (consultantAOR)-[:PARTICIPE]->(evtDevFest)
MERGE (consultantVUJ)-[:PARTICIPE]->(evtDevFest)
MERGE (consultantFNE)-[:PARTICIPE]->(evtDevFest)
MERGE (consultantFNE)-[:PARTICIPE]->(evtGoogleIO)
MERGE (consultantACE)-[:PARTICIPE]->(evtDevFest)
MERGE (consultantACE)-[:PARTICIPE]->(evtDevoxMaroc)
----

.Creation des adresses
----
MERGE(adresseParisVUJ:Adresse{numero:49, voie:'Bd de la Chapelle', ville:'Paris',pays:'France', dateDebut:'2011-05-01', dateFin:'2015-10-01'})
MERGE(adresseNantesVUJ:Adresse{numero:24, voie:'rue Rene Cassin', ville:'Nantes',pays:'France', dateDebut:'2015-10-01', dateFin:'2017-01-01'})
MERGE(adresseMaisdonVUJ:Adresse{numero:26, voie:'rue du Gardouet', ville:'Maisdon Sur Sèvres',pays:'France', dateDebut:'2016-12-24'})
----

.Creation de la relation *personne/adresse*
----
MERGE (personneVUJ)-[:RESIDE]->(adresseParisVUJ)
MERGE (personneVUJ)-[:RESIDE]->(adresseNantesVUJ)
MERGE (personneVUJ)-[:RESIDE]->(adresseMaisdonVUJ)
----

.Creation de type d'*echanges*
----
MERGE(contactMailVUJ:Echange{type:'Mail',destinataire:'cp@mu.tu',pj:'O',date:'2010-01-23',contenu:'Ceci est un test',objet:'Test'})
MERGE(contactTelVUJ:Echange{type:'TEL',destinataire:'0663859539',pj:'N',date:'2018-01-23',contenu:'on mange quoi',objet:''})
MERGE(contactCourVUJ:Echange{type:'Courrier',destinataire:'Caisse Epargne',pj:'N',date:'2017-01-10',contenu:'Changement de banque', objet:'Changement de banque'})
----

.Creation de la relation *consultant/echanges*
----
MERGE (personneVUJ)-[:A ECHANGE]->(cntactMailVUJ)
MERGE (personneVUJ)-[:A ECHANGE]->(cntactTelVUJ)
MERGE (personneVUJ)-[:A ECHANGE]->(cntactCourVUJ)
----

.Creation des factures VUJ
----
MERGE(factureNdfTelVUJ:Facture{libelle:'NDF 201802',destinataire:'Compta Nantes',montant:23.25,intitule:'Telephone'})
MERGE(factureNdfBureauVUJ:Facture{libelle:'NDF 201802',destinataire:'Compta Nantes',montant:70.00,intitule:'Fourniture Mac'})
MERGE(factureNdfMacVUJ:Facture{libelle:'NDF 201802',destinataire:'Compta Nantes',montant:70.00,intitule:'Fourniture Mac'})
----

.Creation des factures ABO
----
MERGE(factureNdfABO:Facture{libelle:'NDF 201802',destinataire:'Compta Nantes',montant:70.00,intitule:'Tel',dateDepense:'2018-01-03'})
MERGE(factureDiversABO:Facture{libelle:'Choucroute',destinataire:'Compta Nantes',montant:40.00,intitule:'autres',dateDepense:'2018-01-05'})
MERGE(factureRepasABO:Facture{libelle:'NDF 201802',destinataire:'Compta Nantes',montant:45.00,intitule:'Repas Clientelle',dateDepense:'2018-01-06'})
MERGE(factureRDVABO:Facture{libelle:'NDF 201802',destinataire:'Compta Nantes',montant:150.00,intitule:'RDV Clientelle',dateDepense:'2018-03-03'})
----

.Creation Fature Amelin  CE
----
MERGE(factureTelAOR:Facture{libelle:'NDF 201802',destinataire:'Compta Nantes',montant:05.00,intitule:'Tel',dateDepense:'2018-02-03'})
MERGE(factureDiversAOR:Facture{libelle:'Divers',destinataire:'Compta Nantes',montant:250.00,intitule:'Autres',dateDepense:'2018-02-01'})
MERGE(factureDivers1AOR:Facture{libelle:'Divers',destinataire:'',montant:1250.00,intitule:'Autres',dateDepense:'2018-02-03'})
MERGE(factureDivers2AOR:Facture{libelle:'Divers',destinataire:'',montant:150.00,intitule:'Autres',dateAchat:'2018-01-08'})
----

.Creation de la relation *consultantZ/Facture*
----
MERGE (consultantVUJ)-[:EMET]->(factureNdfTelVUJ)
MERGE (consultantVUJ)-[:EMET]->(factureNdfBureauVUJ)
MERGE (consultantVUJ)-[:EMET]->(factureNdfMacVUJ)
MERGE (consultantABO)-[:EMET]->(factureNdfABO)
MERGE (consultantABO)-[:EMET]->(factureDiversABO)
MERGE (consultantABO)-[:EMET]->(factureRepasABO)
MERGE (consultantABO)-[:EMET]->(factureRDVABO)
MERGE (consultantAOR)-[:EMET]->(factureTelAOR)
MERGE (consultantAOR)-[:EMET]->(factureDiversAOR)
MERGE (consultantAOR)-[:EMET]->(factureDivers1AOR)
MERGE (consultantAOR)-[:EMET]->(factureDivers2AOR)
----

.Creation de l'entite compta
----
MERGE(comptaNantes:Compta{ville:'Nantes'})
MERGE(comptaParis:Compta{Ville:'Paris'})
----

.Creation de la relation *Compta/Facture*
----
MERGE(comptaNantes)-[:VALIDE]->(factureNdfTelVUJ)
MERGE(comptaNantes)-[:VALIDE]->(factureNdfBureauVUJ)
MERGE(comptaNantes)-[:VALIDE]->(factureNdfMacVUJ)
MERGE(comptaNantes)-[:VALIDE]->(factureNdfABO)
MERGE(comptaNantes)-[:VALIDE]->(factureDiversABO)
MERGE(comptaNantes)-[:VALIDE]->(factureRepasABO)
MERGE(comptaNantes)-[:VALIDE]->(factureNdfABO)
MERGE(comptaNantes)-[:VALIDE]->(factureRDVABO)
MERGE(comptaNantes)-[:VALIDE]->(factureTelAOR)
MERGE(comptaNantes)-[:VALIDE]->(factureDiversAOR)
----

.Creation des transactions
----
MERGE(transaction1:Transaction{sens:'D',date:'2017-01-01',destinataire:'vickrame',emetteur:'compta Nantes',libelle:'paie',montant:2000.00})
MERGE(transaction2:Transaction{sens:'D',date:'2017-02-01',destinataire:'vickrame',emetteur:'compta Nantes',libelle:'paie',montant:2000.00})
MERGE(transaction3:Transaction{sens:'D',date:'2017-03-01',destinataire:'vickrame',emetteur:'compta Nantes',libelle:'paie',montant:2600.00})
MERGE(transaction4:Transaction{sens:'D',date:'2017-04-01',destinataire:'vickrame',emetteur:'compta Nantes',libelle:'paie',montant:2100.00})

MERGE(transaction21:Transaction{sens:'D',date:'2017-01-01',destinataire:'vickrame',emetteur:'compta Nantes',libelle:'paie',montant:2000.00})
MERGE(transaction5:Transaction{sens:'C',date:'2017-03-01',destinataire:'Agence Nantes',emetteur:'compta Paris',libelle:'bonus',montant:10000.00})
MERGE(transaction6:Transaction{sens:'D',date:'2017-03-01',destinataire:'Meetup',emetteur:'Agence Nantes',libelle:'course meetup',montant:400.00})
MERGE(transaction7:Transaction{sens:'D',date:'2017-01-11',destinataire:'Jouet Club',emetteur:'CE Nantes',libelle:'arbre de noel',montant:500.00})
MERGE(transaction8:Transaction{sens:'D',date:'2017-01-25',destinataire:'Agence Nantes',emetteur:'CE Nantes',libelle:'cheque cadeau',montant:3000.00})
MERGE(transaction9:Transaction{sens:'D',date:'2017-04-23',destinataire:'Agence Nantes',emetteur:'CE Nantes',libelle:'confort agence',montant:5000.00})
MERGE(transaction10:Transaction{sens:'D',date:'2017-03-01',destinataire:'Agence Nantes',emetteur:'CE Nantes',libelle:'voyages Portugal',montant:5000.00})
MERGE(transaction11:Transaction{sens:'D',date:'2017-05-01',destinataire:'Agence Nantes',emetteur:'CE Nantes',libelle:'remboursement frais',montant:1000.00})
MERGE(transaction12:Transaction{sens:'D',date:'2017-04-10',destinataire:'',emetteur:'CE Nantes',libelle:'autres',montant:10.00})
MERGE(transaction13:Transaction{sens:'D',date:'2017-06-24',destinataire:'',emetteur:'inconnu',libelle:'divers',montant:2.00})
MERGE(transaction14:Transaction{sens:'D',date:'2017-03-20',destinataire:'',emetteur:'inconnu',libelle:'remboursement frais',montant:2.00})
MERGE(transaction15:Transaction{sens:'D',date:'2017-03-26',destinataire:'',emetteur:'inconnu',libelle:'parking',montant:2.00})
MERGE(transaction16:Transaction{sens:'D',date:'2017-03-24',destinataire:'',emetteur:'inconnu',libelle:'autres',montant:2.00})
MERGE(transaction17:Transaction{sens:'D',date:'2017-03-26',destinataire:'',emetteur:'inconnu',libelle:'achats bureautiques',montant:2.00})
MERGE(transaction18:Transaction{sens:'D',date:'2017-03-26',destinataire:'',emetteur:'inconnu',libelle:'achats bureautiques',montant:2.00})
MERGE(transaction19:Transaction{sens:'D',date:'2017-03-26',destinataire:'',emetteur:'inconnu',libelle:'achats bureautiques',montant:2.00})
MERGE(transaction20:Transaction{sens:'D',date:'2017-03-26',destinataire:'',emetteur:'inconnu',libelle:'achats bureautiques',montant:2.00})
----

.Creation de la realtion *transaction/Compte*
----
MERGE (transaction1)-[:AFFECTE]->(compteAgence)
MERGE (transaction1)-[:AFFECTE]->(compteVUJ)
MERGE (transaction2)-[:AFFECTE]->(compteAgence)
MERGE (transaction2)-[:AFFECTE]->(compteVUJ)
MERGE (transaction3)-[:AFFECTE]->(compteAgence)
MERGE (transaction3)-[:AFFECTE]->(compteVUJ)
MERGE (transaction4)-[:AFFECTE]->(compteAgence)
MERGE (transaction4)-[:AFFECTE]->(compteVUJ)
MERGE (transaction21)-[:AFFECTE]->(compteAgence)
MERGE (transaction21)-[:AFFECTE]->(compteVUJ)

MERGE (transaction5)-[:AFFECTE]->(compteAgence)
MERGE (transaction5)-[:AFFECTE]->(compteAgenceParis)
MERGE (transaction6)-[:AFFECTE]->(compteAgence)
MERGE (transaction7)-[:AFFECTE]->(compteAgence)
MERGE (transaction8)-[:AFFECTE]->(compteAgence)
MERGE (transaction8)-[:AFFECTE]->(compteVUJ)
MERGE (transaction8)-[:AFFECTE]->(compteFNE)
MERGE (transaction8)-[:AFFECTE]->(compteABO)
MERGE (transaction8)-[:AFFECTE]->(compteAOR)
MERGE (transaction8)-[:AFFECTE]->(compteACE)
MERGE (transaction9)-[:AFFECTE]->(compteAgence)
MERGE (transaction9)-[:AFFECTE]->(compteVUJ)
MERGE (transaction9)-[:AFFECTE]->(compteFNE)
MERGE (transaction9)-[:AFFECTE]->(compteABO)
MERGE (transaction9)-[:AFFECTE]->(compteAOR)
MERGE (transaction9)-[:AFFECTE]->(compteACE)
MERGE (transaction10)-[:AFFECTE]->(compteAgence)
MERGE (transaction10)-[:AFFECTE]->(compteVUJ)
MERGE (transaction10)-[:AFFECTE]->(compteFNE)
MERGE (transaction10)-[:AFFECTE]->(compteABO)
MERGE (transaction10)-[:AFFECTE]->(compteAOR)
MERGE (transaction10)-[:AFFECTE]->(compteACE)
MERGE (transaction11)-[:AFFECTE]->(compteAgence)
MERGE (transaction12)-[:AFFECTE]->(compteVUJ)
MERGE (transaction13)-[:AFFECTE]->(compteFNE)
MERGE (transaction14)-[:AFFECTE]->(compteABO)
MERGE (transaction15)-[:AFFECTE]->(compteAOR)
MERGE (transaction16)-[:AFFECTE]->(compteACE)
MERGE (transaction17)-[:AFFECTE]->(compteAgence)
MERGE (transaction18)-[:AFFECTE]->(compteAgence)
MERGE (transaction19)-[:AFFECTE]->(compteAgence)
MERGE (transaction20)-[:AFFECTE]->(compteAgence)
MERGE (transaction21)-[:AFFECTE]->(compteAgence)
----


.Tout renvoyer
[source,cypher]
----
MATCH (n)
RETURN n;
----
