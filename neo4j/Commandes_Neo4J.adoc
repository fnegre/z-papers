# Commandes Neo4J

Petit memo

.Supprimer le contenu de la base
[source,cypher]
----
MATCH (n)
DETACH DELETE n
----

.Renvoyer tout le contenu de la base
[source,cypher]
----
MATCH (n)
RETURN n
----

.Distances entre deux points
[source,cypher]
----
Match(pos1:Position {libelle: 'Quick'})
Match (pos2:Position {libelle: 'CBP'})
//return pos1, pos2

WITH point({ longitude: pos1.longitude, latitude: pos1.latitude }) AS p1, point({ longitude: pos2.longitude, latitude: pos2.latitude }) AS p2
RETURN distance(p1,p2) AS dist
----


.Cr√©er une relation entre chaque lieu contenant leur distance
[source,cypher]
----
Match(pos1:Position), (pos2:Position)
WHERE pos1.libelle <> pos2.libelle
WITH point({ longitude: pos1.longitude, latitude: pos1.latitude }) AS p1, point({ longitude: pos2.longitude, latitude: pos2.latitude }) AS p2, pos1, pos2
MERGE (pos1)-[:DISTANCE{valeur:distance(p1,p2)}]-(pos2)
----


You can run this query to get an overview of entities and how they are related:
MATCH (a)-[r]->(b) WHERE labels(a) <> [] AND labels(b) <> []
RETURN DISTINCT head(labels(a)) AS This, type(r) as To, head(labels(b)) AS That LIMIT 10